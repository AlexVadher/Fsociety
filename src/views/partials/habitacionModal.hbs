<div x-data="{ 
        modalIsOpen: false, 
        registerModalOpen: false,
        habitaciones: [],
        hotelId: null,
        async openHabitacionesModal(hotelId) {
            this.hotelId = hotelId;
            try {
                const response = await fetch(`/getHabitacionesByHotel/${hotelId}`);
                const data = await response.json();
                this.habitaciones = data.habitaciones;
                this.modalIsOpen = true;
            } catch (error) {
                console.error('Error al obtener las habitaciones:', error);
            }
        }
    }">

    <!-- Button to open the habitaciones modal -->
    <button type='button' @click='openHabitacionesModal({{hotelId}})' class='text-blue-500 hover:text-blue-700'>
        <i class='fa-solid fa-eye'></i>
    </button>

    <!-- Habitaciones Modal -->
    <div x-show='modalIsOpen' x-transition.opacity.duration.200ms x-trap.inert.noscroll='modalIsOpen'
        @click.self='modalIsOpen = false'
        class='fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-30 backdrop-blur-sm'>
        <div class='bg-white rounded-lg shadow-lg w-full max-w-md p-6 relative'>
            <!-- Close Button -->
            <button @click='modalIsOpen = false' class='absolute top-2 right-2 text-gray-500 hover:text-gray-700'>
                <i class='fa-solid fa-xmark fa-2xl'></i>
            </button>

            <h2 class='text-2xl font-semibold mb-4 text-center'>Habitaciones</h2>
            <table class='min-w-full divide-y divide-gray-200'>
                <thead class='bg-gray-800 text-white'>
                    <tr>
                        <th class='px-6 py-3 text-left text-xs font-medium uppercase tracking-wider'>Código</th>
                        <th class='px-6 py-3 text-left text-xs font-medium uppercase tracking-wider'>Tipo</th>
                        <th class='px-6 py-3 text-left text-xs font-medium uppercase tracking-wider'>Costo</th>
                    </tr>
                </thead>
                <tbody class='bg-white divide-y divide-gray-200'>
                    <template x-for='habitacion in habitaciones' :key='habitacion.id'>
                        <tr>
                            <td class='px-6 py-4 whitespace-nowrap' x-text='habitacion.codigo'></td>
                            <td class='px-6 py-4 whitespace-nowrap' x-text='habitacion.tipo'></td>
                            <td class='px-6 py-4 whitespace-nowrap' x-text='habitacion.costo'></td>
                        </tr>
                    </template>
                </tbody>
            </table>

            <!-- Button to open the modal to add new habitacion -->
            <button @click='registerModalOpen = true'
                class='mt-4 w-full bg-green-600 text-white py-2 rounded-md hover:bg-green-700'>
                Añadir Habitación
            </button>
        </div>
    </div>

    <!-- Modal for Registering Habitacion -->
    <div x-show='registerModalOpen' x-transition.opacity.duration.200ms x-trap.inert.noscroll='registerModalOpen'
        @click.self='registerModalOpen = false'
        class='fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-30 backdrop-blur-sm'>
        <div class='bg-white rounded-lg shadow-lg w-full max-w-md p-6 relative'>
            <!-- Close Button -->
            <button @click='registerModalOpen = false' class='absolute top-2 right-2 text-gray-500 hover:text-gray-700'>
                <i class='fa-solid fa-xmark fa-2xl'></i>
            </button>

            <!-- Register Form -->
            <h2 class='text-2xl font-semibold mb-4 text-center'>Registrar
                Habitación</h2>
            <form action='/registerHabitacion' method='post' class='space-y-4'>
                <!-- Código -->
                <div class='flex items-center'>
                    <label class='w-32 text-gray-700 font-medium' for='codigo'>Código</label>
                    <input type='text' class='form-input mt-1 block w-full' id='codigo' name='codigo' required />
                </div>
                <!-- Tipo -->
                <div class='flex items-center'>
                    <label class='w-32 text-gray-700 font-medium' for='tipo'>Tipo</label>
                    <input type='text' class='form-input mt-1 block w-full' id='tipo' name='tipo' required />
                </div>
                <!-- Costo -->
                <div class='flex items-center'>
                    <label class='w-32 text-gray-700 font-medium' for='costo'>Costo</label>
                    <input type='text' class='form-input mt-1 block w-full' id='costo' name='costo' required />
                </div>
                <!-- Hotel ID (Hidden) -->
                <input type='hidden' name='idhotel' :value='hotelId' />

                <!-- Botón de Envío -->
                <div class='mt-6'>
                    <button type='submit' class='w-full bg-green-600 text-white py-2 rounded-md hover:bg-green-700'>
                        Registrar Habitación
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>